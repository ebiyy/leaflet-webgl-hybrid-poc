# Leaflet WebGL Hybrid POC - 技術的知見まとめ

このディレクトリには、Leaflet WebGL Hybrid POCプロジェクトの開発で得られた技術的知見をコンテキストごとにまとめています。

## 📚 記事一覧

### 1. [WASM最適化テクニック](./wasm-optimization-techniques.md)
Rust/WASMアプリケーションのサイズを5MBから446KB（約91%削減）まで削減した手法を解説。wee_alloc、ビルド最適化、多段階最適化スクリプトなど、実践的な最適化テクニックを紹介。

### 2. [WebGLパフォーマンス最適化](./webgl-performance-optimization.md)
Pixi.jsを使用して10,000個のオブジェクトを75FPSで描画する方法。オブジェクトプーリング、ビューポートカリング、バッチ処理など、高性能レンダリングの実装手法を解説。

### 3. [Dioxus SPAアーキテクチャ設計](./dioxus-spa-architecture.md)
Dioxus v0.6の制約を回避するMPA的アプローチの採用理由と実装方法。状態管理の課題、ルートベースの機能分離、外部ライブラリとの統合パターンを詳説。

### 4. [E2Eテスト自動化](./e2e-testing-with-playwright.md)
Claude CodeのMCP Playwright統合を活用した統合テスト戦略。7種類のテストシナリオの実装例と、Rust/WASMアプリケーション特有のテスト課題への対処法。

### 5. [開発小ネタ集](./development-tips.md)
POC開発中に遭遇したトラブルシューティング、実験的な試み、細かなTipsなど。mise環境構築、エラー対処法、測定スクリプトなどの実用的な情報。

## 🎯 主要な成果

- **WASMサイズ**: 446KB（目標2MB以内を大幅達成）
- **初回ロード**: 平均823ms（目標3秒以内を大幅達成）
- **レンダリング**: 10,000オブジェクト@75FPS
- **入力遅延**: 0.4ms（目標200ms以内を大幅達成）
- **メモリ効率**: 30秒連続動作でリークゼロ

## 🔧 使用技術スタック

- **言語**: Rust (edition 2021)
- **UIフレームワーク**: Dioxus 0.6.3
- **スタイリング**: Tailwind CSS v4
- **地図**: Leaflet.js
- **WebGL**: Pixi.js
- **ビルド**: Trunk 0.21.14
- **テスト**: MCP Playwright

## 💡 得られた知見

1. **早期の技術選定が重要**: WASMサイズ最適化は初期から考慮すべき
2. **フレームワークの制約は回避策を探る**: Dioxusの課題をMPAアプローチで解決
3. **段階的な最適化が効果的**: 各ステップの効果を測定しながら進める
4. **自動テストは開発効率を大幅向上**: MCP統合により迅速なフィードバック

これらの知見は、高性能なWebアプリケーション開発において広く応用可能です。